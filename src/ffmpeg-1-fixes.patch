diff --git a/libavcodec/pngenc.c b/libavcodec/pngenc.c
index 9bbb826..650c488 100644
--- a/libavcodec/pngenc.c
+++ b/libavcodec/pngenc.c
@@ -39,6 +39,7 @@
 #include "libavutil/stereo3d.h"
 
 #include <zlib.h>
+#undef option
 
 #define IOBUF_SIZE 4096
 
diff --git a/libavcodec/rasc.c b/libavcodec/rasc.c
index a8e00a4..1cdd86f 100644
--- a/libavcodec/rasc.c
+++ b/libavcodec/rasc.c
@@ -33,6 +33,7 @@
 #include "zlib_wrapper.h"
 
 #include <zlib.h>
+#undef option
 
 #define KBND MKTAG('K', 'B', 'N', 'D')
 #define FINT MKTAG('F', 'I', 'N', 'T')
diff --git a/libavformat/async.c b/libavformat/async.c
index e0329e2..b0d1a9a 100644
--- a/libavformat/async.c
+++ b/libavformat/async.c
@@ -39,6 +39,7 @@
 
 #if HAVE_UNISTD_H
 #include <unistd.h>
+#undef option
 #endif
 
 #define BUFFER_CAPACITY         (4 * 1024 * 1024)
diff --git a/libavformat/cache.c b/libavformat/cache.c
index 0d68221..fdb5891 100644
--- a/libavformat/cache.c
+++ b/libavformat/cache.c
@@ -40,6 +40,7 @@
 #endif
 #if HAVE_UNISTD_H
 #include <unistd.h>
+#undef option
 #endif
 #include <sys/stat.h>
 #include <stdlib.h>
diff --git a/libavformat/file.c b/libavformat/file.c
index a6eceff..f476815 100644
--- a/libavformat/file.c
+++ b/libavformat/file.c
@@ -36,6 +36,7 @@
 #endif
 #if HAVE_UNISTD_H
 #include <unistd.h>
+#undef option
 #endif
 #include <sys/stat.h>
 #include <stdlib.h>
diff --git a/libavformat/hlsenc.c b/libavformat/hlsenc.c
index d3db830..6b29f93 100644
--- a/libavformat/hlsenc.c
+++ b/libavformat/hlsenc.c
@@ -26,6 +26,7 @@
 #include <time.h>
 #if HAVE_UNISTD_H
 #include <unistd.h>
+#undef option
 #endif
 
 #include "libavutil/avassert.h"
diff --git a/libavformat/http.c b/libavformat/http.c
index 0d40775..766056f 100644
--- a/libavformat/http.c
+++ b/libavformat/http.c
@@ -27,6 +27,7 @@
 #include <time.h>
 #if CONFIG_ZLIB
 #include <zlib.h>
+#undef option
 #endif /* CONFIG_ZLIB */
 
 #include "libavutil/avassert.h"
diff --git a/libavformat/id3v2.c b/libavformat/id3v2.c
index 037d1a2..d52dca1 100644
--- a/libavformat/id3v2.c
+++ b/libavformat/id3v2.c
@@ -30,6 +30,7 @@
 
 #if CONFIG_ZLIB
 #include <zlib.h>
+#undef option
 #endif
 
 #include "libavutil/avstring.h"
diff --git a/libavformat/matroskadec.c b/libavformat/matroskadec.c
index 1e0c75c..ea4a1ca 100644
--- a/libavformat/matroskadec.c
+++ b/libavformat/matroskadec.c
@@ -76,6 +76,7 @@
 #if CONFIG_ZLIB
 #include <zlib.h>
 #endif
+#undef option
 
 #include "qtpalette.h"
 
diff --git a/libavformat/mov.c b/libavformat/mov.c
index b29c41a..0155171 100644
--- a/libavformat/mov.c
+++ b/libavformat/mov.c
@@ -72,6 +72,7 @@
 
 #if CONFIG_ZLIB
 #include <zlib.h>
+#undef option
 #endif
 
 #include "qtpalette.h"
diff --git a/libavformat/network.h b/libavformat/network.h
index 7c72c90..7d9884b 100644
--- a/libavformat/network.h
+++ b/libavformat/network.h
@@ -32,6 +32,7 @@
 
 #if HAVE_UNISTD_H
 #include <unistd.h>
+#undef option
 #endif
 
 #if HAVE_WINSOCK2_H
diff --git a/libavutil/cpu.c b/libavutil/cpu.c
index 8f9b785..3688760 100644
--- a/libavutil/cpu.c
+++ b/libavutil/cpu.c
@@ -47,6 +47,7 @@
 #endif
 #if HAVE_UNISTD_H
 #include <unistd.h>
+#undef option
 #endif
 
 #if HAVE_GETAUXVAL || HAVE_ELF_AUX_INFO
diff --git a/libavutil/file.c b/libavutil/file.c
index 4ef940a..b509da5 100644
--- a/libavutil/file.c
+++ b/libavutil/file.c
@@ -27,6 +27,7 @@
 #include <sys/stat.h>
 #if HAVE_UNISTD_H
 #include <unistd.h>
+#undef option
 #endif
 #if HAVE_IO_H
 #include <io.h>
diff --git a/libavutil/file_open.c b/libavutil/file_open.c
index 4692035..010529b 100644
--- a/libavutil/file_open.c
+++ b/libavutil/file_open.c
@@ -25,6 +25,7 @@
 #include <sys/stat.h>
 #if HAVE_UNISTD_H
 #include <unistd.h>
+#undef option
 #endif
 #if HAVE_IO_H
 #include <io.h>
diff --git a/libavutil/log.h b/libavutil/log.h
index 4a111ca..429197a 100644
--- a/libavutil/log.h
+++ b/libavutil/log.h
@@ -73,6 +73,7 @@ struct AVOptionRanges;
  * arbitrary struct of which the first field is a pointer to an
  * AVClass struct (e.g. AVCodecContext, AVFormatContext etc.).
  */
+#undef option
 typedef struct AVClass {
     /**
      * The name of the class; usually it is the same name as the
